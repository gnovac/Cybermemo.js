"use strict";function _createForOfIteratorHelper(e,t){var r,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var games=["Detroit: Become Human","The Ascent","Shadowrun Returns","Cyberpunk 2077","Ghostrunner","Deus Ex","Ruiner","Observer","Detroit: Become Human","The Ascent","Shadowrun Returns","Cyberpunk 2077","Ghostrunner","Deus Ex","Ruiner","Observer"],movies=["Blade Runner","The Matrix","RoboCop","Altered Carbon","The Fifth Element","Ghost In The Shell","Total Recall","Black Mirror","Blade Runner","The Matrix","RoboCop","Altered Carbon","The Fifth Element","Ghost In The Shell","Total Recall","Black Mirror"],series=["Neuromancer","The Book of Strange New Things","When Gravity Fails","Data Runner","Slant","Van","The Windup Girl","Snow Crash","Neuromancer","The Book of Strange New Things","When Gravity Fails","Data Runner","Slant","Van","The Windup Girl","Snow Crash"],startModal=document.querySelector(".start-modal"),selectDeckBox=document.querySelector(".start-modal__select-box"),playBtn=document.querySelector(".start-modal__play-btn"),selectedDeck=document.querySelector(".selected"),moves=document.querySelector(".moves-display"),timer=document.querySelector(".time-display"),stars=document.querySelectorAll(".fa-star"),resetBtn=document.querySelector(".game-panel__reset-btn"),cards=document.getElementsByClassName("deck__card"),cardsArr=_toConsumableArray(cards),deck=document.querySelector(".deck"),matchedCards=document.getElementsByClassName("matched"),openedCards=document.getElementsByClassName("open"),scoreBox=document.querySelector(".score-panel__score-box"),bestTimesList=document.querySelector(".score-panel__scores-display"),winModal=document.querySelector(".win-modal"),winModalScore=document.querySelector(".win-modal__score"),winModalStars=document.querySelector(".win-modal__stars"),winModalYesBtn=document.querySelector(".win-modal__yes-btn"),winModalNoBtn=document.querySelector(".win-modal__no-btn"),openedCardsArr=[],results=[],timeCounter=0,countTime=null,movesCounter=0,starCounter=0,storageAvailable=!1,deckItems=games,selectDeck=function(e){e.target.classList.contains("start-modal__deck-cat")&&(selectedDeck.classList.remove("selected"),(selectedDeck=e.target).classList.add("selected")),e.target.classList.contains("games")&&(deckItems=games),e.target.classList.contains("movies")&&(deckItems=movies),e.target.classList.contains("series")&&(deckItems=series)},addTimes=function(){var e=prompt("You got a highscore! Enter name:"),e={timeCounter:timeCounter,name:e};results.push(e),results.sort(function(e,t){return e.timeCounter-t.timeCounter}),localStorage.setItem("times",JSON.stringify(results))},showHighTimes=function(){var e=null!=(e=JSON.parse(localStorage.getItem("times")))?e:[];bestTimesList.innerHTML=e.map(function(e){return"<li>".concat(e.name," - ").concat(e.timeCounter," sec</li>")}).slice(0,5).join("")},shuffle=function(e){for(var t=e.length-1;0<t;t--){var r=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[r],e[r]=a}return e},loadDeck=function(){shuffle(deckItems);for(var e=0;e<cardsArr.length;e++)cardsArr[e].innerHTML=deckItems[e]},startTimer=function(){timeCounter++,timer.textContent=timeCounter},incrementMoves=function(){movesCounter++,moves.textContent=movesCounter,decrementStars()},decrementStars=function(){16===movesCounter?(stars[2].classList.remove("fas"),stars[2].classList.add("far"),starCounter--):24===movesCounter&&(stars[1].classList.remove("fas"),stars[1].classList.add("far"),starCounter--)},disableCards=function(){Array.prototype.filter.call(cards,function(e){e.classList.add("disabled")})},enableCards=function(){Array.prototype.filter.call(cards,function(e){e.classList.remove("disabled");for(var t=0;t<matchedCards.length;t++)matchedCards[t].classList.add("disabled")})},startGame=function(e){if(e.target.classList.contains("deck__card")&&!e.target.classList.contains("open")&&!e.target.classList.contains("matched")&&(e.target.classList.add("open"),e.target.classList.add("show"),openedCardsArr.push(e.target),2===openedCardsArr.length))if(incrementMoves(),openedCardsArr[0].innerHTML===openedCardsArr[1].innerHTML){var t,r=_createForOfIteratorHelper(openedCardsArr);try{for(r.s();!(t=r.n()).done;)t.value.classList.add("matched")}catch(e){r.e(e)}finally{r.f()}matchedCards.length===cardsArr.length&&completeGame(),openedCardsArr=[]}else disableCards(),setTimeout(function(){var e,t=_createForOfIteratorHelper(openedCardsArr);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.classList.remove("open"),r.classList.remove("show")}}catch(e){t.e(e)}finally{t.f()}enableCards(),openedCardsArr=[]},1500);countTime=countTime||setInterval(startTimer,1e3)},resetGame=function(){for(;openedCards.length;)openedCards[0].classList.remove("open","show","matched","disabled");openedCardsArr=[],movesCounter=0,moves.textContent=movesCounter,clearInterval(countTime),countTime=null,timeCounter=0,timer.textContent=timeCounter;for(var e=0;e<stars.length;e++)stars[e].classList.remove("far"),stars[e].classList.add("fas");resetBtn.classList.remove("disabled"),startModal.classList.add("show-start-modal"),winModal.classList.remove("show-win-modal"),scoreBox.classList.remove("show")},completeGame=function(){clearInterval(countTime),addTimes(),showHighTimes(),winModal.classList.add("show-win-modal"),winModalScore.textContent="".concat(timeCounter," seconds & ").concat(movesCounter," moves.");for(var e=0;e<stars.length;e++){var t=stars[e].cloneNode(!0);winModalStars.appendChild(t)}resetBtn.classList.add("disabled")},closeStartModal=function(){startModal.classList.remove("show-start-modal"),loadDeck(),scoreBox.classList.add("show"),showHighTimes(),winModalStars.innerHTML=""},closeWinModal=function(){winModal.classList.remove("show-win-modal"),resetBtn.classList.remove("disabled")};selectDeckBox.addEventListener("click",selectDeck),playBtn.addEventListener("click",closeStartModal),deck.addEventListener("click",startGame),resetBtn.addEventListener("click",resetGame),winModalYesBtn.addEventListener("click",resetGame),winModalNoBtn.addEventListener("click",closeWinModal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnYW1lcyIsIm1vdmllcyIsInNlcmllcyIsInN0YXJ0TW9kYWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3REZWNrQm94IiwicGxheUJ0biIsInNlbGVjdGVkRGVjayIsInRpbWVyIiwiY2FyZHNBcnIiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJjYXJkcyIsInN0YXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvcGVuZWRDYXJkcyIsInNjb3JlQm94IiwiZGVjayIsIndpbk1vZGFsU2NvcmUiLCJiZXN0VGltZXNMaXN0Iiwid2luTW9kYWxOb0J0biIsIndpbk1vZGFsU3RhcnMiLCJ3aW5Nb2RhbFllc0J0biIsIm9wZW5lZENhcmRzQXJyIiwicmVzdWx0cyIsInRpbWVDb3VudGVyIiwiY291bnRUaW1lIiwic3RvcmFnZUF2YWlsYWJsZSIsImUiLCJkZWNrSXRlbXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsInRhcmdldCIsInNlbGVjdERlY2siLCJuYW1lIiwicHJvbXB0IiwibmV3U2NvcmUiLCJwdXNoIiwic29ydCIsImEiLCJiIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXRyaWV2ZWRUaW1lcyIsIl9KU09OJHBhcnNlIiwicGFyc2UiLCJnZXRJdGVtIiwibWFwIiwidGltZSIsInNsaWNlIiwic2h1ZmZsZSIsImFycmF5Iiwic2hvd0hpZ2hUaW1lcyIsImxlbmd0aCIsImoiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpIiwidGVtcCIsInN0YXJ0VGltZXIiLCJ0ZXh0Q29udGVudCIsImluY3JlbWVudE1vdmVzIiwibW92ZXNDb3VudGVyIiwiaW5uZXJIVE1MIiwiZGVjcmVtZW50U3RhcnMiLCJhZGQiLCJzdGFyQ291bnRlciIsIm1vdmVzIiwiQXJyYXkiLCJmaWx0ZXIiLCJjYWxsIiwiY2FyZCIsIm1hdGNoZWRDYXJkcyIsInN0YXJ0R2FtZSIsImVuYWJsZUNhcmRzIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInZhbHVlIiwiZXJyIiwiZiIsImRpc2FibGVDYXJkcyIsInNldFRpbWVvdXQiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwicyIsIm4iLCJkb25lIiwiY29tcGxldGVHYW1lIiwic2V0SW50ZXJ2YWwiLCJyZXNldEdhbWUiLCJjbGVhckludGVydmFsIiwicmVzZXRCdG4iLCJ3aW5Nb2RhbCIsImNvbmNhdCIsInN0YXJzQ29weSIsImNsb25lTm9kZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlU3RhcnRNb2RhbCJdLCJtYXBwaW5ncyI6ImdxREFDQSxJQUFJQSxNQUFRLENBQUMsd0JBQXdCLGFBQWEsb0JBQW9CLGlCQUFpQixjQUFjLFVBQVUsU0FBUyxXQUFXLHdCQUF3QixhQUFhLG9CQUFvQixpQkFBaUIsY0FBYyxVQUFVLFNBQVMsWUFHMU9DLE9BQVMsQ0FBQyxlQUFlLGFBQWEsVUFBVSxpQkFBaUIsb0JBQW9CLHFCQUFxQixlQUFlLGVBQWUsZUFBZSxhQUFhLFVBQVUsaUJBQWlCLG9CQUFvQixxQkFBcUIsZUFBZSxnQkFHdlBDLE9BQVMsQ0FBQyxjQUFjLGlDQUFpQyxxQkFBcUIsY0FBYyxRQUFRLE1BQU0sa0JBQWtCLGFBQWEsY0FBYyxpQ0FBaUMscUJBQXFCLGNBQWMsUUFBUSxNQUFNLGtCQUFrQixjQUl6UEMsV0FBYUMsU0FBU0MsY0FBYyxnQkFDcENDLGNBQWdCRixTQUFTQyxjQUFjLDRCQUN2Q0UsUUFBVUgsU0FBU0MsY0FBYywwQkFidkNHLGFBQUFKLFNBQUFDLGNBQUEsYUFPSUgsTUFBVUUsU0FBQUMsY0FBYyxrQkFhdEJJLE1BQVFMLFNBQVNDLGNBQWMsaUJBVC9CRixNQUFVQyxTQUFHQSxpQkFBdUIsWUFDcENFLFNBQWFGLFNBQUdBLGNBQVNDLDBCQUkzQkcsTUFBQUEsU0FBZUosdUJBQXVCLGNBVXRDTSxT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LGlCQUFpQixRQUFTUixXQXhCekMxRSxjQUFNbUYsaUJBQUFBLFFBQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL0BkZXNjcmlwdGlvbiBEZWNrIENhdGVnb3JpZXNcclxubGV0IGdhbWVzID0gW1wiRGV0cm9pdDogQmVjb21lIEh1bWFuXCIsXCJUaGUgQXNjZW50XCIsXCJTaGFkb3dydW4gUmV0dXJuc1wiLFwiQ3liZXJwdW5rIDIwNzdcIixcIkdob3N0cnVubmVyXCIsXCJEZXVzIEV4XCIsXCJSdWluZXJcIixcIk9ic2VydmVyXCIsXCJEZXRyb2l0OiBCZWNvbWUgSHVtYW5cIixcIlRoZSBBc2NlbnRcIixcIlNoYWRvd3J1biBSZXR1cm5zXCIsXCJDeWJlcnB1bmsgMjA3N1wiLFwiR2hvc3RydW5uZXJcIixcIkRldXMgRXhcIixcIlJ1aW5lclwiLFwiT2JzZXJ2ZXJcIixcclxuXTtcclxuXHJcbmxldCBtb3ZpZXMgPSBbXCJCbGFkZSBSdW5uZXJcIixcIlRoZSBNYXRyaXhcIixcIlJvYm9Db3BcIixcIkFsdGVyZWQgQ2FyYm9uXCIsXCJUaGUgRmlmdGggRWxlbWVudFwiLFwiR2hvc3QgSW4gVGhlIFNoZWxsXCIsXCJUb3RhbCBSZWNhbGxcIixcIkJsYWNrIE1pcnJvclwiLFwiQmxhZGUgUnVubmVyXCIsXCJUaGUgTWF0cml4XCIsXCJSb2JvQ29wXCIsXCJBbHRlcmVkIENhcmJvblwiLFwiVGhlIEZpZnRoIEVsZW1lbnRcIixcIkdob3N0IEluIFRoZSBTaGVsbFwiLFwiVG90YWwgUmVjYWxsXCIsXCJCbGFjayBNaXJyb3JcIixcclxuXTtcclxuXHJcbmxldCBzZXJpZXMgPSBbXCJOZXVyb21hbmNlclwiLFwiVGhlIEJvb2sgb2YgU3RyYW5nZSBOZXcgVGhpbmdzXCIsXCJXaGVuIEdyYXZpdHkgRmFpbHNcIixcIkRhdGEgUnVubmVyXCIsXCJTbGFudFwiLFwiVmFuXCIsXCJUaGUgV2luZHVwIEdpcmxcIixcIlNub3cgQ3Jhc2hcIixcIk5ldXJvbWFuY2VyXCIsXCJUaGUgQm9vayBvZiBTdHJhbmdlIE5ldyBUaGluZ3NcIixcIldoZW4gR3Jhdml0eSBGYWlsc1wiLFwiRGF0YSBSdW5uZXJcIixcIlNsYW50XCIsXCJWYW5cIixcIlRoZSBXaW5kdXAgR2lybFwiLFwiU25vdyBDcmFzaFwiLFxyXG5dO1xyXG5cclxuLy9AZGVzY3JpcHRpb24gR2FtZSBTdGFydCBNb2RhbFxyXG5jb25zdCBzdGFydE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydC1tb2RhbFwiKTtcclxuY29uc3Qgc2VsZWN0RGVja0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RhcnQtbW9kYWxfX3NlbGVjdC1ib3hcIik7XHJcbmNvbnN0IHBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0LW1vZGFsX19wbGF5LWJ0blwiKTtcclxuXHJcbi8vQGRlc2NyaXB0aW9uIERlY2sgU2VsZWN0aW9uXHJcbmxldCBzZWxlY3RlZERlY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkXCIpO1xyXG5cclxuLy9AZGVzY3JpcHRpb24gSW5mbyBQYW5lbFxyXG5jb25zdCBtb3ZlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW92ZXMtZGlzcGxheVwiKTtcclxuY29uc3QgdGltZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpbWUtZGlzcGxheVwiKTtcclxuY29uc3Qgc3RhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZhLXN0YXJcIik7XHJcbmNvbnN0IHJlc2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYW1lLXBhbmVsX19yZXNldC1idG5cIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBBbGwgQ2FyZHNcclxubGV0IGNhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRlY2tfX2NhcmRcIik7XHJcbmxldCBjYXJkc0FyciA9IFsuLi5jYXJkc107XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBEZWNrXHJcbmNvbnN0IGRlY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlY2tcIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBNYXRjaGVkICYgb3BlbmVkIGNhcmRzXHJcbmxldCBtYXRjaGVkQ2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWF0Y2hlZFwiKTtcclxubGV0IG9wZW5lZENhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm9wZW5cIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBCZXN0IFNjb3JlXHJcbmNvbnN0IHNjb3JlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY29yZS1wYW5lbF9fc2NvcmUtYm94XCIpO1xyXG5jb25zdCBiZXN0VGltZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY29yZS1wYW5lbF9fc2NvcmVzLWRpc3BsYXlcIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBHYW1lIENvbXBsZXRlZCBNb2RhbFxyXG5jb25zdCB3aW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLW1vZGFsXCIpO1xyXG5jb25zdCB3aW5Nb2RhbFNjb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tbW9kYWxfX3Njb3JlXCIpO1xyXG5jb25zdCB3aW5Nb2RhbFN0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tbW9kYWxfX3N0YXJzXCIpO1xyXG5jb25zdCB3aW5Nb2RhbFllc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLW1vZGFsX195ZXMtYnRuXCIpO1xyXG5jb25zdCB3aW5Nb2RhbE5vQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tbW9kYWxfX25vLWJ0blwiKTtcclxuXHJcbmxldCBvcGVuZWRDYXJkc0FyciA9IFtdO1xyXG5sZXQgcmVzdWx0cyA9IFtdO1xyXG5sZXQgdGltZUNvdW50ZXIgPSAwO1xyXG5sZXQgY291bnRUaW1lID0gbnVsbDtcclxubGV0IG1vdmVzQ291bnRlciA9IDA7XHJcbmxldCBzdGFyQ291bnRlciA9IDA7XHJcbmxldCBzdG9yYWdlQXZhaWxhYmxlID0gZmFsc2U7XHJcbmxldCBkZWNrSXRlbXMgPSBnYW1lczsgLy9kZWZhdWx0IGRlY2sgY2F0ZWdvcnlcclxuXHJcbi8vQGRlc2NyaXB0aW9uIFNlbGVjdCBEZWNrIENhdGVnb3J5IGluIFN0YXJ0IE1vZGFsXHJcbmNvbnN0IHNlbGVjdERlY2sgPSAoZSkgPT4ge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzdGFydC1tb2RhbF9fZGVjay1jYXRcIikpIHtcclxuICAgIHNlbGVjdGVkRGVjay5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcbiAgICBzZWxlY3RlZERlY2sgPSBlLnRhcmdldDtcclxuICAgIHNlbGVjdGVkRGVjay5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgfVxyXG5cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ2FtZXNcIikpIHtcclxuICAgIGRlY2tJdGVtcyA9IGdhbWVzO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW92aWVzXCIpKSB7XHJcbiAgICBkZWNrSXRlbXMgPSBtb3ZpZXM7XHJcbiAgfVxyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzZXJpZXNcIikpIHtcclxuICAgIGRlY2tJdGVtcyA9IHNlcmllcztcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gQGRlc2NyaXB0aW9uIFNldCB0aW1lcyBhbmQgcGxheWVyIG5hbWUgdG8gbG9jYWxTdG9yYWdlXHJcbmNvbnN0IGFkZFRpbWVzID0gKCkgPT4ge1xyXG4gIGNvbnN0IG5hbWUgPSBwcm9tcHQoXCJZb3UgZ290IGEgaGlnaHNjb3JlISBFbnRlciBuYW1lOlwiKTtcclxuICBjb25zdCBuZXdTY29yZSA9IHsgdGltZUNvdW50ZXIsIG5hbWUgfTtcclxuICByZXN1bHRzLnB1c2gobmV3U2NvcmUpO1xyXG4gIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYS50aW1lQ291bnRlciAtIGIudGltZUNvdW50ZXIpO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGltZXNcIiwgSlNPTi5zdHJpbmdpZnkocmVzdWx0cykpO1xyXG59O1xyXG4gIFxyXG4vLyBAZGVzY3JpcHRpb24gR2V0IDUgYmVzdCB0aW1lcyBmcm9tIGxvY2FsU3RvcmFnZVxyXG5jb25zdCBzaG93SGlnaFRpbWVzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgcmV0cmlldmVkVGltZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aW1lcycpKSA/PyBbXTtcclxuICAgIGJlc3RUaW1lc0xpc3QuaW5uZXJIVE1MID0gcmV0cmlldmVkVGltZXMubWFwKFxyXG4gICAgICAodGltZSkgPT4gYDxsaT4ke3RpbWUubmFtZX0gLSAke3RpbWUudGltZUNvdW50ZXJ9IHNlYzwvbGk+YFxyXG4gICAgKS5zbGljZSgwLCA1KS5qb2luKFwiXCIpO1xyXG59O1xyXG5cclxuXHJcbi8vQGRlc2NyaXB0aW9uIEZpc2hlciBZYXRlcyBBbGdvcml0aG0gdG8gc2h1ZmZsZSBhcnJheSBvZiBjYXJkc1xyXG5jb25zdCBzaHVmZmxlID0gKGFycmF5KSA9PiB7XHJcbiAgZm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuICAgIGNvbnN0IHRlbXAgPSBhcnJheVtpXTtcclxuICAgIGFycmF5W2ldID0gYXJyYXlbal07XHJcbiAgICBhcnJheVtqXSA9IHRlbXA7XHJcbiAgfVxyXG4gIHJldHVybiBhcnJheTtcclxufTtcclxuXHJcbi8vQGRlc2NyaXB0aW9uIFNodWZmbGUgJiBsb2FkIGNob29zZW4gYXJyYXkgdG8gZGVja1xyXG5jb25zdCBsb2FkRGVjayA9ICgpID0+IHtcclxuICBzaHVmZmxlKGRlY2tJdGVtcyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXJkc0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgY2FyZHNBcnJbaV0uaW5uZXJIVE1MID0gZGVja0l0ZW1zW2ldO1xyXG4gIH1cclxufTtcclxuXHJcbi8vQGRlc2NyaXB0aW9uIEdhbWUgdGltZXJcclxuY29uc3Qgc3RhcnRUaW1lciA9ICgpID0+IHtcclxuICB0aW1lQ291bnRlcisrO1xyXG4gIHRpbWVyLnRleHRDb250ZW50ID0gdGltZUNvdW50ZXI7XHJcbn07XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBHYW1lIG1vdmVzXHJcbmNvbnN0IGluY3JlbWVudE1vdmVzID0gKCkgPT4ge1xyXG4gIG1vdmVzQ291bnRlcisrO1xyXG4gIG1vdmVzLnRleHRDb250ZW50ID0gbW92ZXNDb3VudGVyO1xyXG4gIGRlY3JlbWVudFN0YXJzKCk7XHJcbn07XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBHYW1lIHN0YXJzXHJcbmNvbnN0IGRlY3JlbWVudFN0YXJzID0gKCkgPT4ge1xyXG4gIGlmIChtb3Zlc0NvdW50ZXIgPT09IDE2KSB7XHJcbiAgICBzdGFyc1syXS5jbGFzc0xpc3QucmVtb3ZlKFwiZmFzXCIpO1xyXG4gICAgc3RhcnNbMl0uY2xhc3NMaXN0LmFkZChcImZhclwiKTtcclxuICAgIHN0YXJDb3VudGVyLS07XHJcbiAgfSBlbHNlIGlmIChtb3Zlc0NvdW50ZXIgPT09IDI0KSB7XHJcbiAgICBzdGFyc1sxXS5jbGFzc0xpc3QucmVtb3ZlKFwiZmFzXCIpO1xyXG4gICAgc3RhcnNbMV0uY2xhc3NMaXN0LmFkZChcImZhclwiKTtcclxuICAgIHN0YXJDb3VudGVyLS07XHJcbiAgfVxyXG59O1xyXG5cclxuLy9AZGVzY3JpcHRpb24gRGlzYWJsZSBjbGljayBldmVudCBvbiBhbGwgY2FyZHNcclxuY29uc3QgZGlzYWJsZUNhcmRzID0gKCkgPT4ge1xyXG4gIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChjYXJkcywgKGNhcmQpID0+IHtcclxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy9AZGVzY3JpcHRpb24gRGlzYWJsZSBjbGljayBldmVudCBvbiBtYXRjaGVkIGNhcmRzIGFuZCBlbmFibGUgb24gdGhlIHJlc3RcclxuY29uc3QgZW5hYmxlQ2FyZHMgPSAoKSA9PiB7XHJcbiAgQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGNhcmRzLCAoY2FyZCkgPT4ge1xyXG4gICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoZWRDYXJkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBtYXRjaGVkQ2FyZHNbaV0uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnRHYW1lID0gKGUpID0+IHtcclxuICBpZiAoXHJcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWNrX19jYXJkXCIpICYmXHJcbiAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSAmJlxyXG4gICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1hdGNoZWRcIilcclxuICApIHtcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xyXG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICBvcGVuZWRDYXJkc0Fyci5wdXNoKGUudGFyZ2V0KTtcclxuXHJcbiAgICBpZiAob3BlbmVkQ2FyZHNBcnIubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgIGluY3JlbWVudE1vdmVzKCk7XHJcblxyXG4gICAgICAvL0BkZXNjcmlwdGlvbiBXaGVuIGNhcmRzIG1hdGNoZWRcclxuICAgICAgaWYgKG9wZW5lZENhcmRzQXJyWzBdLmlubmVySFRNTCA9PT0gb3BlbmVkQ2FyZHNBcnJbMV0uaW5uZXJIVE1MKSB7XHJcbiAgICAgICAgZm9yIChsZXQgY2FyZCBvZiBvcGVuZWRDYXJkc0Fycikge1xyXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwibWF0Y2hlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtYXRjaGVkQ2FyZHMubGVuZ3RoID09PSBjYXJkc0Fyci5sZW5ndGgpIHtcclxuICAgICAgICAgIGNvbXBsZXRlR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvcGVuZWRDYXJkc0FyciA9IFtdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vQGRlc2NyaXB0aW9uIFdoZW4gY2FyZHMgZG9uJ3QgbWF0Y2hlZFxyXG4gICAgICAgIGRpc2FibGVDYXJkcygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgZm9yIChsZXQgY2FyZCBvZiBvcGVuZWRDYXJkc0Fycikge1xyXG4gICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xyXG4gICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZW5hYmxlQ2FyZHMoKTtcclxuICAgICAgICAgIG9wZW5lZENhcmRzQXJyID0gW107XHJcbiAgICAgICAgfSwgMTUwMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiAxc2VrIGludGVydmFsIGZvciBnYW1lIHRpbWVyIGZ1bmN0aW9uXHJcbiAgaWYgKCFjb3VudFRpbWUpIHtcclxuICAgIGNvdW50VGltZSA9IHNldEludGVydmFsKHN0YXJ0VGltZXIsIDEwMDApO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcclxuICAvLzEuIFJFU0VUIERFQ0tcclxuICAvLyBAZGVzY3JpcHRpb24gUmVtb3ZlIGNsYXNzZXMgZnJvbSBjbGlja2VkIGNhcmRzICYgY2xlYXIgb3BlbmVkQ2FyZHMgQXJyYXkgaW4gY2FzZSBpZiBpcyBtaWRkbGUgb2YgdGhlIGdhbWVcclxuICB3aGlsZSAob3BlbmVkQ2FyZHMubGVuZ3RoKSB7XHJcbiAgICBvcGVuZWRDYXJkc1swXS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiLCBcInNob3dcIiwgXCJtYXRjaGVkXCIsIFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG4gIG9wZW5lZENhcmRzQXJyID0gW107XHJcblxyXG4gIC8vMi4gUkVTRVQgR0FNRSBQQU5FTCBJTkZPXHJcbiAgLy8gQGRlc2NyaXB0aW9uIFNldCBnYW1lIG1vdmVzIHRvIDBcclxuICBtb3Zlc0NvdW50ZXIgPSAwO1xyXG4gIG1vdmVzLnRleHRDb250ZW50ID0gbW92ZXNDb3VudGVyO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gU2V0IGdhbWUgdGltZXIgdG8gMFxyXG4gIGNsZWFySW50ZXJ2YWwoY291bnRUaW1lKTtcclxuICBjb3VudFRpbWUgPSBudWxsO1xyXG4gIHRpbWVDb3VudGVyID0gMDtcclxuICB0aW1lci50ZXh0Q29udGVudCA9IHRpbWVDb3VudGVyO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gUmVzZXQgc3RhcnNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBzdGFyc1tpXS5jbGFzc0xpc3QucmVtb3ZlKFwiZmFyXCIpO1xyXG4gICAgc3RhcnNbaV0uY2xhc3NMaXN0LmFkZChcImZhc1wiKTtcclxuICB9XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiAgRW5hYmxlIGNsaWNrIGV2ZW50IG9uIHJlc2V0IGJ1dHRvbiBpZiBpcyBkaXNhYmxlZFxyXG4gIHJlc2V0QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuXHJcbiAgLy8gNC4gU0hPVy9ISURFIERPTSBFTEVNRU5UU1xyXG4gIC8vQGRlc2NyaXB0aW9uICBPcGVuIHN0YXJ0IG1vZGFsIHdpbmRvd1xyXG4gIHN0YXJ0TW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3ctc3RhcnQtbW9kYWxcIik7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiAgQ2xvc2Ugd2luZCBtb2RhbCBpZiBvcGVuXHJcbiAgd2luTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctd2luLW1vZGFsXCIpO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gIEhpZGUgc2NvcmVzIGxpc3RcclxuICBzY29yZUJveC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxufTtcclxuXHJcbmNvbnN0IGNvbXBsZXRlR2FtZSA9ICgpID0+IHtcclxuICAvLyBAZGVzY3JpcHRpb24gU3RvcHMgdGltZXJcclxuICBjbGVhckludGVydmFsKGNvdW50VGltZSk7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiBDYWxsIGxvY2FsU3RvcmFnZSBmdW5jdGlvbnNcclxuICBhZGRUaW1lcygpO1xyXG4gIHNob3dIaWdoVGltZXMoKTtcclxuXHJcbiAgLy8gQCBkZXNjcmlwdGlvbiBPcGVuIENvbmdyYXR1bGF0aW9ucyBXaW5kb3dcclxuICB3aW5Nb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvdy13aW4tbW9kYWxcIik7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiBTaG93cyB0aW1lIGFuZCBtb3ZlcyBpbiBtb2RhbFxyXG4gIHdpbk1vZGFsU2NvcmUudGV4dENvbnRlbnQgPSBgJHt0aW1lQ291bnRlcn0gc2Vjb25kcyAmICR7bW92ZXNDb3VudGVyfSBtb3Zlcy5gO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gQ29weSBzdGFycyByYXRpbmcgdG8gbW9kYWxcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgc3RhcnNDb3B5ID0gc3RhcnNbaV0uY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgd2luTW9kYWxTdGFycy5hcHBlbmRDaGlsZChzdGFyc0NvcHkpO1xyXG4gIH1cclxuICAvLyBAZGlzY3JpcHRpb24gRGlzYWJsZSByZXNldCBidXR0b24gd2hpbGUgY29uZ3JhdHVsYXRpb25zIHdpbmRvdyBpcyBkaXNwbGFpbmdcclxuICByZXNldEJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VTdGFydE1vZGFsID0gKCkgPT4ge1xyXG4gIHN0YXJ0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctc3RhcnQtbW9kYWxcIik7XHJcbiAgbG9hZERlY2soKTtcclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uIFNob3cgc2NvcmVzIGxpc3RcclxuICBzY29yZUJveC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uIExvYWQgc2NvcmVzIGZyb20gbG9jYWxTdG9yYWdlXHJcbiAgc2hvd0hpZ2hUaW1lcygpO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gQ2xlYXIgc3RhcnMgZnJvbSBjb25ncmF0dWxhdGlvbnMgd2luZG93IHRvIGF2b2lkIGR1YmJsZVxyXG4gIHdpbk1vZGFsU3RhcnMuaW5uZXJIVE1MID0gXCJcIjtcclxufTtcclxuXHJcbmNvbnN0IGNsb3NlV2luTW9kYWwgPSAoKSA9PiB7XHJcbiAgd2luTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctd2luLW1vZGFsXCIpO1xyXG4gIHJlc2V0QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxufTtcclxuXHJcbi8vIC0tLS1FdmVudCBMaXN0ZW5lcnMtLS0tIC8vXHJcbnNlbGVjdERlY2tCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbGVjdERlY2spO1xyXG5wbGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVN0YXJ0TW9kYWwpO1xyXG5kZWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzdGFydEdhbWUpO1xyXG5yZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVzZXRHYW1lKTtcclxud2luTW9kYWxZZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlc2V0R2FtZSk7XHJcbndpbk1vZGFsTm9CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlV2luTW9kYWwpO1xyXG4iXX0=
