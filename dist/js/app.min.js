"use strict";function _createForOfIteratorHelper(e,t){var r,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,n=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,s=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw s}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var games=["Detroit: Become Human","The Ascent","Shadowrun Returns","Cyberpunk 2077","Ghostrunner","Deus Ex","Ruiner","Observer","Detroit: Become Human","The Ascent","Shadowrun Returns","Cyberpunk 2077","Ghostrunner","Deus Ex","Ruiner","Observer"],movies=["Blade Runner","The Matrix","RoboCop","Altered Carbon","The Fifth Element","Ghost In The Shell","Total Recall","Black Mirror","Blade Runner","The Matrix","RoboCop","Altered Carbon","The Fifth Element","Ghost In The Shell","Total Recall","Black Mirror"],series=["Neuromancer","The Book of Strange New Things","When Gravity Fails","Data Runner","Slant","Van","The Windup Girl","Snow Crash","Neuromancer","The Book of Strange New Things","When Gravity Fails","Data Runner","Slant","Van","The Windup Girl","Snow Crash"],startModal=document.querySelector(".start-modal"),selectDeckBox=document.querySelector(".start-modal__select-box"),playBtn=document.querySelector(".start-modal__play-btn"),selectedDeck=document.querySelector(".selected"),moves=document.querySelector(".moves-display"),timer=document.querySelector(".time-display"),stars=document.querySelectorAll(".fa-star"),resetBtn=document.querySelector(".game-panel__reset-btn"),cards=document.getElementsByClassName("deck__card"),cardsArr=_toConsumableArray(cards),deck=document.querySelector(".deck"),matchedCards=document.getElementsByClassName("matched"),openedCards=document.getElementsByClassName("open"),scoreBox=document.querySelector(".score-panel__score-box"),bestTimesList=document.querySelector(".score-panel__scores-display"),winModal=document.querySelector(".win-modal"),winModalScore=document.querySelector(".win-modal__score"),winModalStars=document.querySelector(".win-modal__stars"),winModalYesBtn=document.querySelector(".win-modal__yes-btn"),winModalNoBtn=document.querySelector(".win-modal__no-btn"),openedCardsArr=[],results=[],timeCounter=0,countTime=null,movesCounter=0,starCounter=0,storageAvailable=!1,deckItems=games,selectDeck=function(e){e.target.classList.contains("start-modal__deck-cat")&&(selectedDeck.classList.remove("selected"),(selectedDeck=e.target).classList.add("selected")),e.target.classList.contains("games")&&(deckItems=games),e.target.classList.contains("movies")&&(deckItems=movies),e.target.classList.contains("series")&&(deckItems=series)},addTimes=function(){results.push(timeCounter),results.sort(function(e,t){return e-t}),localStorage.setItem("times",JSON.stringify(results))},showHighTimes=function(){var e=null!=(e=JSON.parse(localStorage.getItem("times")))?e:[];bestTimesList.innerHTML=e.map(function(e){return"<li>".concat(e," sec</li>")}).slice(0,5).join("")},shuffle=function(e){for(var t=e.length-1;0<t;t--){var r=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[r],e[r]=a}return e},loadDeck=function(){shuffle(deckItems);for(var e=0;e<cardsArr.length;e++)cardsArr[e].innerHTML=deckItems[e]},startTimer=function(){timeCounter++,timer.textContent=timeCounter},incrementMoves=function(){movesCounter++,moves.textContent=movesCounter,decrementStars()},decrementStars=function(){16===movesCounter?(stars[2].classList.remove("fas"),stars[2].classList.add("far"),starCounter--):24===movesCounter&&(stars[1].classList.remove("fas"),stars[1].classList.add("far"),starCounter--)},disableCards=function(){Array.prototype.filter.call(cards,function(e){e.classList.add("disabled")})},enableCards=function(){Array.prototype.filter.call(cards,function(e){e.classList.remove("disabled");for(var t=0;t<matchedCards.length;t++)matchedCards[t].classList.add("disabled")})},startGame=function(e){if(e.target.classList.contains("deck__card")&&!e.target.classList.contains("open")&&!e.target.classList.contains("matched")&&(e.target.classList.add("open"),e.target.classList.add("show"),openedCardsArr.push(e.target),2===openedCardsArr.length))if(incrementMoves(),openedCardsArr[0].innerHTML===openedCardsArr[1].innerHTML){var t,r=_createForOfIteratorHelper(openedCardsArr);try{for(r.s();!(t=r.n()).done;)t.value.classList.add("matched")}catch(e){r.e(e)}finally{r.f()}matchedCards.length===cardsArr.length&&(console.log("you won"),completeGame()),openedCardsArr=[]}else disableCards(),setTimeout(function(){var e,t=_createForOfIteratorHelper(openedCardsArr);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.classList.remove("open"),r.classList.remove("show")}}catch(e){t.e(e)}finally{t.f()}enableCards(),openedCardsArr=[]},1500);countTime=countTime||setInterval(startTimer,1e3)},resetGame=function(){for(;openedCards.length;)openedCards[0].classList.remove("open","show","matched","disabled");openedCardsArr=[],movesCounter=0,moves.textContent=movesCounter,clearInterval(countTime),countTime=null,timeCounter=0,timer.textContent=timeCounter;for(var e=0;e<stars.length;e++)stars[e].classList.remove("far"),stars[e].classList.add("fas");resetBtn.classList.remove("disabled"),startModal.classList.add("show-start-modal"),winModal.classList.remove("show-win-modal"),scoreBox.classList.remove("show")},completeGame=function(){clearInterval(countTime),addTimes(),showHighTimes(),winModal.classList.add("show-win-modal"),winModalScore.textContent="".concat(timeCounter," seconds & ").concat(movesCounter," moves.");for(var e=0;e<stars.length;e++){var t=stars[e].cloneNode(!0);winModalStars.appendChild(t)}resetBtn.classList.add("disabled")},closeStartModal=function(){startModal.classList.remove("show-start-modal"),loadDeck(),scoreBox.classList.add("show"),showHighTimes(),winModalStars.innerHTML=""},closeWinModal=function(){winModal.classList.remove("show-win-modal"),resetBtn.classList.remove("disabled")};selectDeckBox.addEventListener("click",selectDeck),playBtn.addEventListener("click",closeStartModal),deck.addEventListener("click",startGame),resetBtn.addEventListener("click",resetGame),winModalYesBtn.addEventListener("click",resetGame),winModalNoBtn.addEventListener("click",closeWinModal);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnYW1lcyIsIm1vdmllcyIsInNlcmllcyIsInN0YXJ0TW9kYWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3REZWNrQm94IiwicGxheUJ0biIsInNlbGVjdGVkRGVjayIsInRpbWVyIiwiY2FyZHNBcnIiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJjYXJkcyIsInN0YXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvcGVuZWRDYXJkcyIsInNjb3JlQm94IiwiZGVjayIsIndpbk1vZGFsU2NvcmUiLCJiZXN0VGltZXNMaXN0Iiwid2luTW9kYWxOb0J0biIsIndpbk1vZGFsU3RhcnMiLCJ3aW5Nb2RhbFllc0J0biIsIm9wZW5lZENhcmRzQXJyIiwicmVzdWx0cyIsInRpbWVDb3VudGVyIiwiY291bnRUaW1lIiwic3RvcmFnZUF2YWlsYWJsZSIsImUiLCJkZWNrSXRlbXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsInRhcmdldCIsInNlbGVjdERlY2siLCJwdXNoIiwic29ydCIsImEiLCJiIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXRyaWV2ZWRUaW1lcyIsIl9KU09OJHBhcnNlIiwicGFyc2UiLCJnZXRJdGVtIiwiaW5uZXJIVE1MIiwibWFwIiwidGltZSIsInNsaWNlIiwiam9pbiIsInNodWZmbGUiLCJhcnJheSIsImxlbmd0aCIsImkiLCJNYXRoIiwidGVtcCIsImoiLCJsb2FkRGVjayIsInN0YXJ0VGltZXIiLCJpbmNyZW1lbnRNb3ZlcyIsIm1vdmVzQ291bnRlciIsIm1vdmVzIiwidGV4dENvbnRlbnQiLCJkZWNyZW1lbnRTdGFycyIsImFkZCIsInN0YXJDb3VudGVyIiwiZmlsdGVyIiwiY2FsbCIsImNhcmQiLCJlbmFibGVDYXJkcyIsIkFycmF5IiwicHJvdG90eXBlIiwiZGlzYWJsZUNhcmRzIiwibWF0Y2hlZENhcmRzIiwic3RhcnRHYW1lIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInZhbHVlIiwiZXJyIiwiZiIsImNvbXBsZXRlR2FtZSIsInNldFRpbWVvdXQiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwicyIsIm4iLCJkb25lIiwic2V0SW50ZXJ2YWwiLCJyZXNldEdhbWUiLCJjbGVhckludGVydmFsIiwicmVzZXRCdG4iLCJjb25jYXQiLCJzdGFyc0NvcHkiLCJjbG9uZU5vZGUiLCJjbG9zZVN0YXJ0TW9kYWwiLCJhZGRUaW1lcyIsIndpbk1vZGFsIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VXaW5Nb2RhbCJdLCJtYXBwaW5ncyI6ImdxREFDQSxJQUFJQSxNQUFRLENBQUMsd0JBQXdCLGFBQWEsb0JBQW9CLGlCQUFpQixjQUFjLFVBQVUsU0FBUyxXQUFXLHdCQUF3QixhQUFhLG9CQUFvQixpQkFBaUIsY0FBYyxVQUFVLFNBQVMsWUFHMU9DLE9BQVMsQ0FBQyxlQUFlLGFBQWEsVUFBVSxpQkFBaUIsb0JBQW9CLHFCQUFxQixlQUFlLGVBQWUsZUFBZSxhQUFhLFVBQVUsaUJBQWlCLG9CQUFvQixxQkFBcUIsZUFBZSxnQkFHdlBDLE9BQVMsQ0FBQyxjQUFjLGlDQUFpQyxxQkFBcUIsY0FBYyxRQUFRLE1BQU0sa0JBQWtCLGFBQWEsY0FBYyxpQ0FBaUMscUJBQXFCLGNBQWMsUUFBUSxNQUFNLGtCQUFrQixjQUl6UEMsV0FBYUMsU0FBU0MsY0FBYyxnQkFDcENDLGNBQWdCRixTQUFTQyxjQUFjLDRCQUN2Q0UsUUFBVUgsU0FBU0MsY0FBYywwQkFidkNHLGFBQUFKLFNBQUFDLGNBQUEsYUFPSUgsTUFBVUUsU0FBQUMsY0FBYyxrQkFhdEJJLE1BQVFMLFNBQVNDLGNBQWMsaUJBVC9CRixNQUFVQyxTQUFHQSxpQkFBdUIsWUFDcENFLFNBQWFGLFNBQUdBLGNBQVNDLDBCQUkzQkcsTUFBQUEsU0FBZUosdUJBQXVCLGNBVXRDTSxTQUFR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IENhdGVnb3JpZXNcclxubGV0IGdhbWVzID0gW1wiRGV0cm9pdDogQmVjb21lIEh1bWFuXCIsXCJUaGUgQXNjZW50XCIsXCJTaGFkb3dydW4gUmV0dXJuc1wiLFwiQ3liZXJwdW5rIDIwNzdcIixcIkdob3N0cnVubmVyXCIsXCJEZXVzIEV4XCIsXCJSdWluZXJcIixcIk9ic2VydmVyXCIsXCJEZXRyb2l0OiBCZWNvbWUgSHVtYW5cIixcIlRoZSBBc2NlbnRcIixcIlNoYWRvd3J1biBSZXR1cm5zXCIsXCJDeWJlcnB1bmsgMjA3N1wiLFwiR2hvc3RydW5uZXJcIixcIkRldXMgRXhcIixcIlJ1aW5lclwiLFwiT2JzZXJ2ZXJcIixcclxuXTtcclxuXHJcbmxldCBtb3ZpZXMgPSBbXCJCbGFkZSBSdW5uZXJcIixcIlRoZSBNYXRyaXhcIixcIlJvYm9Db3BcIixcIkFsdGVyZWQgQ2FyYm9uXCIsXCJUaGUgRmlmdGggRWxlbWVudFwiLFwiR2hvc3QgSW4gVGhlIFNoZWxsXCIsXCJUb3RhbCBSZWNhbGxcIixcIkJsYWNrIE1pcnJvclwiLFwiQmxhZGUgUnVubmVyXCIsXCJUaGUgTWF0cml4XCIsXCJSb2JvQ29wXCIsXCJBbHRlcmVkIENhcmJvblwiLFwiVGhlIEZpZnRoIEVsZW1lbnRcIixcIkdob3N0IEluIFRoZSBTaGVsbFwiLFwiVG90YWwgUmVjYWxsXCIsXCJCbGFjayBNaXJyb3JcIixcclxuXTtcclxuXHJcbmxldCBzZXJpZXMgPSBbXCJOZXVyb21hbmNlclwiLFwiVGhlIEJvb2sgb2YgU3RyYW5nZSBOZXcgVGhpbmdzXCIsXCJXaGVuIEdyYXZpdHkgRmFpbHNcIixcIkRhdGEgUnVubmVyXCIsXCJTbGFudFwiLFwiVmFuXCIsXCJUaGUgV2luZHVwIEdpcmxcIixcIlNub3cgQ3Jhc2hcIixcIk5ldXJvbWFuY2VyXCIsXCJUaGUgQm9vayBvZiBTdHJhbmdlIE5ldyBUaGluZ3NcIixcIldoZW4gR3Jhdml0eSBGYWlsc1wiLFwiRGF0YSBSdW5uZXJcIixcIlNsYW50XCIsXCJWYW5cIixcIlRoZSBXaW5kdXAgR2lybFwiLFwiU25vdyBDcmFzaFwiLFxyXG5dO1xyXG5cclxuLy9AZGVzY3JpcHRpb24gR2FtZSBTdGFydCBNb2RhbFxyXG5jb25zdCBzdGFydE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydC1tb2RhbFwiKTtcclxuY29uc3Qgc2VsZWN0RGVja0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RhcnQtbW9kYWxfX3NlbGVjdC1ib3hcIik7XHJcbmNvbnN0IHBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0LW1vZGFsX19wbGF5LWJ0blwiKTtcclxuXHJcbi8vQGRlc2NyaXB0aW9uIERlY2sgU2VsZWN0aW9uXHJcbmxldCBzZWxlY3RlZERlY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkXCIpO1xyXG5cclxuLy9AZGVzY3JpcHRpb24gSW5mbyBQYW5lbFxyXG5jb25zdCBtb3ZlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW92ZXMtZGlzcGxheVwiKTtcclxuY29uc3QgdGltZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpbWUtZGlzcGxheVwiKTtcclxuY29uc3Qgc3RhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZhLXN0YXJcIik7XHJcbmNvbnN0IHJlc2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYW1lLXBhbmVsX19yZXNldC1idG5cIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBBbGwgQ2FyZHNcclxubGV0IGNhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRlY2tfX2NhcmRcIik7XHJcbmxldCBjYXJkc0FyciA9IFsuLi5jYXJkc107XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBEZWNrXHJcbmNvbnN0IGRlY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlY2tcIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBNYXRjaGVkICYgb3BlbmVkIGNhcmRzXHJcbmxldCBtYXRjaGVkQ2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWF0Y2hlZFwiKTtcclxubGV0IG9wZW5lZENhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm9wZW5cIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBCZXN0IFNjb3JlXHJcbmNvbnN0IHNjb3JlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY29yZS1wYW5lbF9fc2NvcmUtYm94XCIpO1xyXG5jb25zdCBiZXN0VGltZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY29yZS1wYW5lbF9fc2NvcmVzLWRpc3BsYXlcIik7XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBHYW1lIENvbXBsZXRlZCBNb2RhbFxyXG5jb25zdCB3aW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLW1vZGFsXCIpO1xyXG5jb25zdCB3aW5Nb2RhbFNjb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tbW9kYWxfX3Njb3JlXCIpO1xyXG5jb25zdCB3aW5Nb2RhbFN0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tbW9kYWxfX3N0YXJzXCIpO1xyXG5jb25zdCB3aW5Nb2RhbFllc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luLW1vZGFsX195ZXMtYnRuXCIpO1xyXG5jb25zdCB3aW5Nb2RhbE5vQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53aW4tbW9kYWxfX25vLWJ0blwiKTtcclxuXHJcbmxldCBvcGVuZWRDYXJkc0FyciA9IFtdO1xyXG5sZXQgcmVzdWx0cyA9IFtdO1xyXG5sZXQgdGltZUNvdW50ZXIgPSAwO1xyXG5sZXQgY291bnRUaW1lID0gbnVsbDtcclxubGV0IG1vdmVzQ291bnRlciA9IDA7XHJcbmxldCBzdGFyQ291bnRlciA9IDA7XHJcbmxldCBzdG9yYWdlQXZhaWxhYmxlID0gZmFsc2U7XHJcbmxldCBkZWNrSXRlbXMgPSBnYW1lczsgLy9kZWZhdWx0IGRlY2sgY2F0ZWdvcnlcclxuXHJcbi8vQGRlc2NyaXB0aW9uIFNlbGVjdCBEZWNrIENhdGVnb3J5IGluIFN0YXJ0IE1vZGFsXHJcbmNvbnN0IHNlbGVjdERlY2sgPSAoZSkgPT4ge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzdGFydC1tb2RhbF9fZGVjay1jYXRcIikpIHtcclxuICAgIHNlbGVjdGVkRGVjay5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcbiAgICBzZWxlY3RlZERlY2sgPSBlLnRhcmdldDtcclxuICAgIHNlbGVjdGVkRGVjay5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgfVxyXG5cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ2FtZXNcIikpIHtcclxuICAgIGRlY2tJdGVtcyA9IGdhbWVzO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW92aWVzXCIpKSB7XHJcbiAgICBkZWNrSXRlbXMgPSBtb3ZpZXM7XHJcbiAgfVxyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzZXJpZXNcIikpIHtcclxuICAgIGRlY2tJdGVtcyA9IHNlcmllcztcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gQGRlc2NyaXB0aW9uIFNldCB0aW1lcyB0byBsb2NhbFN0b3JhZ2VcclxuY29uc3QgYWRkVGltZXMgPSAoKSA9PiB7XHJcbiAgcmVzdWx0cy5wdXNoKHRpbWVDb3VudGVyKTtcclxuICByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRpbWVzXCIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdHMpKTtcclxufTtcclxuICBcclxuLy8gQGRlc2NyaXB0aW9uIEdldCA1IGJlc3QgdGltZXMgZnJvbSBsb2NhbFN0b3JhZ2VcclxuY29uc3Qgc2hvd0hpZ2hUaW1lcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHJldHJpZXZlZFRpbWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGltZXMnKSkgPz8gW107XHJcbiAgICBiZXN0VGltZXNMaXN0LmlubmVySFRNTCA9IHJldHJpZXZlZFRpbWVzLm1hcChcclxuICAgICAgKHRpbWUpID0+IGA8bGk+JHt0aW1lfSBzZWM8L2xpPmBcclxuICAgICkuc2xpY2UoMCwgNSkuam9pbihcIlwiKTtcclxufTtcclxuXHJcblxyXG4vL0BkZXNjcmlwdGlvbiBGaXNoZXIgWWF0ZXMgQWxnb3JpdGhtIHRvIHNodWZmbGUgYXJyYXkgb2YgY2FyZHNcclxuY29uc3Qgc2h1ZmZsZSA9IChhcnJheSkgPT4ge1xyXG4gIGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XHJcbiAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XHJcbiAgICBjb25zdCB0ZW1wID0gYXJyYXlbaV07XHJcbiAgICBhcnJheVtpXSA9IGFycmF5W2pdO1xyXG4gICAgYXJyYXlbal0gPSB0ZW1wO1xyXG4gIH1cclxuICByZXR1cm4gYXJyYXk7XHJcbn07XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBTaHVmZmxlICYgbG9hZCBjaG9vc2VuIGFycmF5IHRvIGRlY2tcclxuY29uc3QgbG9hZERlY2sgPSAoKSA9PiB7XHJcbiAgc2h1ZmZsZShkZWNrSXRlbXMpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHNBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgIGNhcmRzQXJyW2ldLmlubmVySFRNTCA9IGRlY2tJdGVtc1tpXTtcclxuICB9XHJcbn07XHJcblxyXG4vL0BkZXNjcmlwdGlvbiBHYW1lIHRpbWVyXHJcbmNvbnN0IHN0YXJ0VGltZXIgPSAoKSA9PiB7XHJcbiAgdGltZUNvdW50ZXIrKztcclxuICB0aW1lci50ZXh0Q29udGVudCA9IHRpbWVDb3VudGVyO1xyXG59O1xyXG5cclxuLy9AZGVzY3JpcHRpb24gR2FtZSBtb3Zlc1xyXG5jb25zdCBpbmNyZW1lbnRNb3ZlcyA9ICgpID0+IHtcclxuICBtb3Zlc0NvdW50ZXIrKztcclxuICBtb3Zlcy50ZXh0Q29udGVudCA9IG1vdmVzQ291bnRlcjtcclxuICBkZWNyZW1lbnRTdGFycygpO1xyXG59O1xyXG5cclxuLy9AZGVzY3JpcHRpb24gR2FtZSBzdGFyc1xyXG5jb25zdCBkZWNyZW1lbnRTdGFycyA9ICgpID0+IHtcclxuICBpZiAobW92ZXNDb3VudGVyID09PSAxNikge1xyXG4gICAgc3RhcnNbMl0uY2xhc3NMaXN0LnJlbW92ZShcImZhc1wiKTtcclxuICAgIHN0YXJzWzJdLmNsYXNzTGlzdC5hZGQoXCJmYXJcIik7XHJcbiAgICBzdGFyQ291bnRlci0tO1xyXG4gIH0gZWxzZSBpZiAobW92ZXNDb3VudGVyID09PSAyNCkge1xyXG4gICAgc3RhcnNbMV0uY2xhc3NMaXN0LnJlbW92ZShcImZhc1wiKTtcclxuICAgIHN0YXJzWzFdLmNsYXNzTGlzdC5hZGQoXCJmYXJcIik7XHJcbiAgICBzdGFyQ291bnRlci0tO1xyXG4gIH1cclxufTtcclxuXHJcbi8vQGRlc2NyaXB0aW9uIERpc2FibGUgY2xpY2sgZXZlbnQgb24gYWxsIGNhcmRzXHJcbmNvbnN0IGRpc2FibGVDYXJkcyA9ICgpID0+IHtcclxuICBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoY2FyZHMsIChjYXJkKSA9PiB7XHJcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vQGRlc2NyaXB0aW9uIERpc2FibGUgY2xpY2sgZXZlbnQgb24gbWF0Y2hlZCBjYXJkcyBhbmQgZW5hYmxlIG9uIHRoZSByZXN0XHJcbmNvbnN0IGVuYWJsZUNhcmRzID0gKCkgPT4ge1xyXG4gIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChjYXJkcywgKGNhcmQpID0+IHtcclxuICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGVkQ2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbWF0Y2hlZENhcmRzW2ldLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHN0YXJ0R2FtZSA9IChlKSA9PiB7XHJcbiAgaWYgKFxyXG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGVja19fY2FyZFwiKSAmJlxyXG4gICAgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikgJiZcclxuICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtYXRjaGVkXCIpXHJcbiAgKSB7XHJcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xyXG4gICAgb3BlbmVkQ2FyZHNBcnIucHVzaChlLnRhcmdldCk7XHJcblxyXG4gICAgaWYgKG9wZW5lZENhcmRzQXJyLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICBpbmNyZW1lbnRNb3ZlcygpO1xyXG5cclxuICAgICAgLy9AZGVzY3JpcHRpb24gV2hlbiBjYXJkcyBtYXRjaGVkXHJcbiAgICAgIGlmIChvcGVuZWRDYXJkc0FyclswXS5pbm5lckhUTUwgPT09IG9wZW5lZENhcmRzQXJyWzFdLmlubmVySFRNTCkge1xyXG4gICAgICAgIGZvciAobGV0IGNhcmQgb2Ygb3BlbmVkQ2FyZHNBcnIpIHtcclxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcIm1hdGNoZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWF0Y2hlZENhcmRzLmxlbmd0aCA9PT0gY2FyZHNBcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInlvdSB3b25cIik7XHJcbiAgICAgICAgICBjb21wbGV0ZUdhbWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9wZW5lZENhcmRzQXJyID0gW107XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9AZGVzY3JpcHRpb24gV2hlbiBjYXJkcyBkb24ndCBtYXRjaGVkXHJcbiAgICAgICAgZGlzYWJsZUNhcmRzKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBmb3IgKGxldCBjYXJkIG9mIG9wZW5lZENhcmRzQXJyKSB7XHJcbiAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XHJcbiAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbmFibGVDYXJkcygpO1xyXG4gICAgICAgICAgb3BlbmVkQ2FyZHNBcnIgPSBbXTtcclxuICAgICAgICB9LCAxNTAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uIDFzZWsgaW50ZXJ2YWwgZm9yIGdhbWUgdGltZXIgZnVuY3Rpb25cclxuICBpZiAoIWNvdW50VGltZSkge1xyXG4gICAgY291bnRUaW1lID0gc2V0SW50ZXJ2YWwoc3RhcnRUaW1lciwgMTAwMCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xyXG4gIC8vMS4gUkVTRVQgREVDS1xyXG4gIC8vIEBkZXNjcmlwdGlvbiBSZW1vdmUgY2xhc3NlcyBmcm9tIGNsaWNrZWQgY2FyZHMgJiBjbGVhciBvcGVuZWRDYXJkcyBBcnJheSBpbiBjYXNlIGlmIGlzIG1pZGRsZSBvZiB0aGUgZ2FtZVxyXG4gIHdoaWxlIChvcGVuZWRDYXJkcy5sZW5ndGgpIHtcclxuICAgIG9wZW5lZENhcmRzWzBdLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIsIFwic2hvd1wiLCBcIm1hdGNoZWRcIiwgXCJkaXNhYmxlZFwiKTtcclxuICB9XHJcbiAgb3BlbmVkQ2FyZHNBcnIgPSBbXTtcclxuXHJcbiAgLy8yLiBSRVNFVCBHQU1FIFBBTkVMIElORk9cclxuICAvLyBAZGVzY3JpcHRpb24gU2V0IGdhbWUgbW92ZXMgdG8gMFxyXG4gIG1vdmVzQ291bnRlciA9IDA7XHJcbiAgbW92ZXMudGV4dENvbnRlbnQgPSBtb3Zlc0NvdW50ZXI7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiBTZXQgZ2FtZSB0aW1lciB0byAwXHJcbiAgY2xlYXJJbnRlcnZhbChjb3VudFRpbWUpO1xyXG4gIGNvdW50VGltZSA9IG51bGw7XHJcbiAgdGltZUNvdW50ZXIgPSAwO1xyXG4gIHRpbWVyLnRleHRDb250ZW50ID0gdGltZUNvdW50ZXI7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiBSZXNldCBzdGFyc1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgIHN0YXJzW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJmYXJcIik7XHJcbiAgICBzdGFyc1tpXS5jbGFzc0xpc3QuYWRkKFwiZmFzXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uICBFbmFibGUgY2xpY2sgZXZlbnQgb24gcmVzZXQgYnV0dG9uIGlmIGlzIGRpc2FibGVkXHJcbiAgcmVzZXRCdG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG5cclxuICAvLyA0LiBTSE9XL0hJREUgRE9NIEVMRU1FTlRTXHJcbiAgLy9AZGVzY3JpcHRpb24gIE9wZW4gc3RhcnQgbW9kYWwgd2luZG93XHJcbiAgc3RhcnRNb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvdy1zdGFydC1tb2RhbFwiKTtcclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uICBDbG9zZSB3aW5kIG1vZGFsIGlmIG9wZW5cclxuICB3aW5Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy13aW4tbW9kYWxcIik7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiAgSGlkZSBzY29yZXMgbGlzdFxyXG4gIHNjb3JlQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG59O1xyXG5cclxuY29uc3QgY29tcGxldGVHYW1lID0gKCkgPT4ge1xyXG4gIC8vIEBkZXNjcmlwdGlvbiBTdG9wcyB0aW1lclxyXG4gIGNsZWFySW50ZXJ2YWwoY291bnRUaW1lKTtcclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uIENhbGwgbG9jYWxTdG9yYWdlIGZ1bmN0aW9uc1xyXG4gIGFkZFRpbWVzKCk7XHJcbiAgc2hvd0hpZ2hUaW1lcygpO1xyXG5cclxuICAvLyBAIGRlc2NyaXB0aW9uIE9wZW4gQ29uZ3JhdHVsYXRpb25zIFdpbmRvd1xyXG4gIHdpbk1vZGFsLmNsYXNzTGlzdC5hZGQoXCJzaG93LXdpbi1tb2RhbFwiKTtcclxuXHJcbiAgLy8gQGRlc2NyaXB0aW9uIFNob3dzIHRpbWUgYW5kIG1vdmVzIGluIG1vZGFsXHJcbiAgd2luTW9kYWxTY29yZS50ZXh0Q29udGVudCA9IGAke3RpbWVDb3VudGVyfSBzZWNvbmRzICYgJHttb3Zlc0NvdW50ZXJ9IG1vdmVzLmA7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiBDb3B5IHN0YXJzIHJhdGluZyB0byBtb2RhbFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBzdGFyc0NvcHkgPSBzdGFyc1tpXS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB3aW5Nb2RhbFN0YXJzLmFwcGVuZENoaWxkKHN0YXJzQ29weSk7XHJcbiAgfVxyXG4gIC8vIEBkaXNjcmlwdGlvbiBEaXNhYmxlIHJlc2V0IGJ1dHRvbiB3aGlsZSBjb25ncmF0dWxhdGlvbnMgd2luZG93IGlzIGRpc3BsYWluZ1xyXG4gIHJlc2V0QnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZVN0YXJ0TW9kYWwgPSAoKSA9PiB7XHJcbiAgc3RhcnRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1zdGFydC1tb2RhbFwiKTtcclxuICBsb2FkRGVjaygpO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gU2hvdyBzY29yZXMgbGlzdFxyXG4gIHNjb3JlQm94LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xyXG5cclxuICAvLyBAZGVzY3JpcHRpb24gTG9hZCBzY29yZXMgZnJvbSBsb2NhbFN0b3JhZ2VcclxuICBzaG93SGlnaFRpbWVzKCk7XHJcblxyXG4gIC8vIEBkZXNjcmlwdGlvbiBDbGVhciBzdGFycyBmcm9tIGNvbmdyYXR1bGF0aW9ucyB3aW5kb3cgdG8gYXZvaWQgZHViYmxlXHJcbiAgd2luTW9kYWxTdGFycy5pbm5lckhUTUwgPSBcIlwiO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VXaW5Nb2RhbCA9ICgpID0+IHtcclxuICB3aW5Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy13aW4tbW9kYWxcIik7XHJcbiAgcmVzZXRCdG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG59O1xyXG5cclxuLy8gLS0tLUV2ZW50IExpc3RlbmVycy0tLS0gLy9cclxuc2VsZWN0RGVja0JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0RGVjayk7XHJcbnBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU3RhcnRNb2RhbCk7XHJcbmRlY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0R2FtZSk7XHJcbnJlc2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZXNldEdhbWUpO1xyXG53aW5Nb2RhbFllc0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVzZXRHYW1lKTtcclxud2luTW9kYWxOb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VXaW5Nb2RhbCk7XHJcbiJdfQ==
